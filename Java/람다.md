# 람다식(Lambda expression)

람다식은 메소드를 하나의 식으로 표현한 것이다.

- 람다식은 함수를 간략하면서 명확한 식으로 표현할 수 있게 해준다.
- 메소드를 람다식으로 표현하면 메소드의 이름과 반환값이 없어지므로 람다식을 익명 함수라고도 표현한다.

```java
int[] arr = new int[5];
// "() -> (int) (Math.random() * 5) + 1"이 람다식이다.
Arrays.setAll(arr, (i) -> (int) (Math.random() * 5) + 1);

// 위 람다식이 하는 작업을 메소드로 표현
int method() {
  return (int) (Math.random() * 5) + 1;
}
```

### 람다식의 장단점

#### 장점

- 효율적인 람다 함수의 사용으로 불필요한 루프문의 삭제가 가능하며, 함수의 재활용이 용이하다.
- 필요한 정보만을 사용하는 방식을 통한 성능 향상된다.
- 일반적으로 다중 cpu를 활용하는 형태로 구현되어 병렬 처리에 유리하다.
- 코드가 간결해져 가독성이 향상된다.

#### 단점

- 단순하게 모든 원소를 전부 순회하는 경우 람다식이 느릴 수 있다.
- 디버깅이 어렵다.
- 지나치게 사용하면 코드가 이해하기 어렵고 지저분해진다.
- 람다를 사용하여 만든 무명함수는 재사용이 불가능하다.

## 람다식 작성하기

메소드의 이름과 반환타입을 제거하고 매개변수 선언부와 몸통{} 사이에 '->'를 추가한다.

```text
(매개변수 선언) -> { ... }
```

두 값 중에서 큰 값을 반환하는 max 메소드를 람다식으로 변환하면 아래와 같다.

```java
// 메소드 형식
int max(int a, int b) {
  return a > b ? a : b;
}

// 람다식
(int a, int b) -> { return a > b ? a : b; }
```

<br>

반환값이 있는 메소드의 경우 return문 대신 식으로 대신할 수 있다.

```java
(int a, int b) -> {return a > b ? a : b; } ---> (int a, int b) -> a > b ? a: b
```

- 식의 연산결과가 자동적으로 반환값이 된다.
- 문장이 아닌 식이기 때문에 끝에 ';'를 붙이지 않는다.

<br>

람다식에 선언된 매개변수의 타입은 추론이 가능한 경우 생략할 수 있다.

```java
(int a, int b) -> a > b ? a : b ---> (a, b) -> a > b ? a : b
```

- 대부분의 경우 생략가능하며 람다식에 반환타입이 없는 이유는 항상 추론이 가능하기 떄문이다.
- '(int a, b)' 처럼 두 매개변수 중 어느 하나의 타입만 생략하는 것은 허용되지 않는다.

<br>

선언된 매개변수가 하나뿐인 경우 괄호()를 생략할 수 있다.

```java
(a) -> a * a ---> a -> a * a  // OK


// 매개변수의 타입이 있는 경우 괄호를 생략할 수 없다.
(int a) -> a * a ---> int a -> a * a  // Error
```

괄호{} 안의 문장이 하나일 때는 괄호{}를 생략할 수 있다.

```java
(String name, int i) -> {
  System.out.println(name + " = " + i);
}

// 문장의 끝에 ';'을 붙이지 않는다.
(String name, int i) -> {
  System.out.println(name + " = " + i)
}
```

괄호{} 안의 문장이 return 문일 경우 괄호{}를 생략할 수 없다.

```java
(int a, int b) -> { return a > b ? a : b; } // OK
(int a, int b) -> return a > b ? a : b      // Error
```

---

#### 참고

- [자바의 정석](http://www.yes24.com/Product/Goods/24259565)