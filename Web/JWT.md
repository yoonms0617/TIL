# JWT(Json Web Token)

JWTλ” λ¨λ°”μΌμ΄λ‚ μ›Ήμ—μ„ μ‚¬μ©μ μΈμ¦μ„ μ„ν•΄ μ‚¬μ©λλ” μ•”νΈν™”λ ν† ν°μ„ λ§ν•λ‹¤.

### JWTλ¥Ό μ‚¬μ©ν• μΈμ¦κ³Όμ •

1. μ‚¬μ©μκ°€ μ•„μ΄λ””, λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•΄ λ΅κ·ΈμΈν•λ‹¤.
2. μ„λ²„λ” JWT(AccessToken, RefreshToken)λ¥Ό μƒμ„±ν•΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°κΈ‰ν•λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ JWTλ¥Ό λ΅μ»¬ μ¤ν† λ¦¬μ§€μ— μ €μ¥ν•λ‹¤. (λ‹¤λ¥Έ κ³³μ— μ €μ¥ν•  μ μλ‹¤)
   - ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— μ”μ²­ μ‹ ν—¤λ”μ— AccessTokenμ„ λ‹΄μ•„μ„ λ³΄λ‚Έλ‹¤.
4. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ ν—¤λ”μ— λ‹΄μ•„μ„ λ³΄λ‚Έ AccessTokenμ΄ μ ν¨ν•μ§€ ν™•μΈν•λ‹¤.
   - μ ν¨ν• ν† ν°μ΄λ©΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• λ°μ΄ν„°λ¥Ό λ°ν™ν•λ‹¤.
5. λ§μΌ AccessTokenμ΄ λ§λ£λμ—λ‹¤λ©΄ RefreshTokenμ„ μ‚¬μ©ν•΄ μ„λ²„λ΅λ¶€ν„° μƒλ΅μ΄ AccessTokenμ„ λ°κΈ‰λ°›λ”λ‹¤.


## JWT κµ¬μ΅°

<p align="center">
  <img src="./image/jwt-structure.png">
  <small>μ¶μ²: http://www.opennaru.com/opennaru-blog/jwt-json-web-token/</small>
</p>


JWTλ” **HEADER, PAYLOAD, SIGNATURE**λ΅ κµ¬λ¶„λλ‹¤.

- URLμ—μ„ νλΌλ―Έν„°λ΅ μ‚¬μ©ν•  μ μλ„λ΅ URL_Safeν• Base64Urlλ΅ μΈμ½”λ”©λμ–΄ ν‘ν„λλ‹¤.
- κ° λ¶€λ¶„μ„ κµ¬λ¶„ν•κΈ° μ„ν•΄ **.(μ )** μ„ μ‚¬μ©ν•λ‹¤.

### - HEADER

HEADERλ” algμ™€ typ λ‘ κ°€μ§€ μ •λ³΄λ΅ κµ¬μ„±λμ–΄ μλ‹¤.

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

- **alg:** ν•΄μ‹± μ•κ³ λ¦¬μ¦ μ§€μ •ν•λ©° SIGNATURE λ° ν† ν° κ²€μ¦μ— μ‚¬μ©λλ‹¤.
- **typ:** ν† ν°μ νƒ€μ…μ„ μ§€μ •

### - PAYLOAD

ν† ν°μ—μ„ μ‚¬μ©λ  Claimμ΄ λ‹΄κ²¨μλ‹¤.

- μ„Έ κ°€μ§€λ΅ λ‚λ„μ–΄μ§€λ©° Json ν•νƒλ΅ λ‹¤μμ μ •λ³΄λ¥Ό λ„£μ„ μ μλ‹¤.
- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ£Όκ³ λ°›λ” μ‹μ¤ν…μ—μ„ μ‹¤μ λ΅ μ‚¬μ©λ  μ •λ³΄μ— λ€ν• λ‚΄μ©μ„ λ‹΄κ³  μλ‹¤.

#### λ“±λ΅λ ν΄λ μ„(Registered Claim)

ν† ν° μ •λ³΄λ¥Ό ν‘ν„ν•κΈ° μ„ν•΄ μ΄λ―Έ μ •ν•΄μ§„ μΆ…λ¥μ λ°μ΄ν„°λ΅ μ„ νƒμ μΌλ΅ μ‚¬μ© κ°€λ¥ν•λ‹¤.

- **iss(issuer) - ν† ν° λ°κΈ‰μ**
- **sub(subject) - ν† ν° μ λ©**
- **aud(audience) - ν† ν° λ€μƒμ**
- **exp(expiration) - ν† ν° λ§λ£μ‹κ°„:** NumericDate ν•μ‹μΌλ΅ μ§€μ •ν•λ©°, ν„μ¬ μ‹κ°„ μ΄ν›„λ΅ μ„¤μ •ν•΄μ•Όν•λ‹¤.
- **nbf(not before) - ν† ν° ν™μ„±λ‚ μ§:** NumericDate ν•μ‹μΌλ΅ μ§€μ •ν•λ©°, μ΄ λ‚ μ§κ°€ μ§€λ‚κΈ° μ „κΉμ§€λ” ν† ν°μ΄ ν™μ„±ν™” λμ§€ μ•λ”λ‹¤.
- **iat(issued at) - ν† ν° λ°κΈ‰μ‹κ°„:** ν† ν° λ°κΈ‰ μ΄ν›„μ κ²½κ³Ό μ‹κ°„μ„ μ• μ μλ‹¤.
- **jti(jwt id) - ν† ν° κ³ μ  μ‹λ³„μ:** μ¤‘λ³µ λ°©μ§€λ¥Ό μ„ν•΄ μ‚¬μ©λλ‹¤.

#### κ³µκ° ν΄λ μ„(Public Claim)

μ‚¬μ©μκ°€ μ •μν•  μ μλ” ν΄λ μ„μΌλ΅ κ³µκ°μ© μ •λ³΄ μ „λ‹¬μ„ μ„ν•΄ μ‚¬μ©λλ‹¤.

```json
{
  "http://hello.world": "ok"
}
```

- μ„λ΅ μ¶©λν•μ§€ μ•λ” μ΄λ¦„μ„ κ°€μ Έμ•Ό ν•κΈ°μ— URL ν•νƒλ΅ μ‘μ„±ν•λ‹¤.

#### λΉ„κ³µκ° ν΄λ μ„(Private Claim)

μ‚¬μ©μκ°€ μ •μν•  μ μλ” ν΄λ μ„μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ— μ •λ³΄λ¥Ό κ³µμ ν•κΈ° μ„ν•΄ μ‚¬μ©λλ‹¤.

```json
{
  "token_type": "access"
}
```

### - SIGNATURE

ν† ν°μ„ μΈμ½”λ”©ν•κ±°λ‚ μ ν¨μ„± κ²€μ¦μ„ ν•  λ• μ‚¬μ©ν•λ” κ³ μ ν• μ•”νΈν™” μ½”λ“μ΄λ‹¤.

- SIGNATUREλ” HEADERμ™€ PAYLOADμ κ°’μ„ Base64Urlλ΅ μΈμ½”λ”© ν• ν›„ ν•΄λ‹Ή κ°’μ„ λΉ„λ°€ν‚¤λ¥Ό μ΄μ©ν•΄ HEADERμ—μ„ μ •μν• μ•κ³ λ¦¬μ¦(alg)μΌλ΅ ν•΄μ‹±μ„ ν•κ³  λ‹¤μ‹ Base64Urlλ΅ μΈμ½”λ”©ν•μ—¬ μƒμ„±ν•λ‹¤.


- PAYLOADλ” λ‹¨μν Base64Urlλ΅λ§ μΈμ½”λ”©ν• λ°μ΄ν„°μ΄κΈ° λ•λ¬Έμ— μ¤‘κ°„μ— νƒμ·¨λ‹Ήν•λ©΄ μ†μ‰½κ² λ””μ½”λ”©ν•΄ λ°μ΄ν„°λ¥Ό ν™•μΈν•  μ μλ‹¤.
- Claimμ— μ •λ³΄κ°€ λ§μΌλ©΄ JWT κΈΈμ΄κ°€ κΈΈμ–΄μ§€κΈ° λ•λ¬Έμ— λ„¤νΈμ›ν¬μ— λ¶€λ‹΄μ„ μ¤„ μ μλ‹¤.

---

#### μ°Έκ³ 

- [JWT (JSON Web Token) μ΄ν•΄μ™€ ν™μ©](http://www.opennaru.com/opennaru-blog/jwt-json-web-token/)
- [[JWT] JSON Web Token μ†κ° λ° κµ¬μ΅°](https://velopert.com/2389)
- [JWTλ€ λ¬΄μ—‡μΈκ°€](https://tech.toktokhan.dev/2021/04/30/JWT/)
- [[WEB] π“ JWT(Json Web Token )λ€? π’― μ΄ν•΄ν•κΈ° μ‰½κ² μ •λ¦¬](https://inpa.tistory.com/entry/WEB-π“-JWTjson-web-token-λ€-π’―-μ •λ¦¬)